package com.cqx.common.utils.string;

import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import com.cqx.common.utils.system.TimeCostUtil;
import org.junit.Test;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * JsonTest
 *
 * @author chenqixu
 */
public class JsonTest {

    @Test
    public void duo() {
        JsonBean jsonBean = new JsonBean();
        jsonBean.setId("123");
        jsonBean.setName("test1");
        String str = JSON.toJSONString(jsonBean);
        str = str.replace("}", ",\"key\":\"k1\"}");
        System.out.println(str);
        JsonBean js = JSON.parseObject(str, JsonBean.class);
        System.out.println(js.getId());
        System.out.println(js.getName());
    }

    @Test
    public void shao() {
        JsonBean jsonBean = new JsonBean();
        jsonBean.setId("123");
        jsonBean.setName("test1");
        String str = JSON.toJSONString(jsonBean);
        str = str.replace(",\"name\":\"test1\"}", "}");
        System.out.println(str);
        JsonBean js = JSON.parseObject(str, JsonBean.class);
        System.out.println(js.getId());
        System.out.println(js.getName());
    }

    @Test
    public void MapToJson() {
        Map<String, String> map = new HashMap<>();
        map.put("teamid", "123");
        System.out.println(JSON.toJSONString(map));// {"teamid":"123"}
        String jsonStr = "{\"teamid\":\"123\"}";
        Map<String, String> jsonMap = JSON.parseObject(jsonStr, Map.class);
        System.out.println(jsonMap);
    }

    @Test
    public void xingneng() {
        List<List<String>> tagList = new ArrayList<>();
        List<String> s = new ArrayList<>();
        s.add("1");
        tagList.add(s);

        TimeCostUtil all = new TimeCostUtil(true);
        all.start();
        TimeCostUtil tempTc = new TimeCostUtil(true);
        for (int i = 0; i < 10000; i++) {
            tempTc.start();
            // 获取批标签对应数据
            JSONObject batchObj = new JSONObject();
            if (tagList.get(0).size() > 0) {
                batchObj = JSON.parseObject("{\"1460\":\"\",\"1217\":\"1\",\"475\":\"2021青春卡5G入网特惠（甲卡）/20260901\",\"354\":\"学生\",\"1214\":\"591500326165887\",\"234\":\"0\",\"1213\":\"4\",\"1212\":\"1\",\"1218\":\"0\",\"1594\":\"0\",\"1593\":\"0\",\"1592\":\"1\",\"1591\":\"1\",\"1590\":\"1\",\"483\":\"0\",\"1\":\"0\",\"1589\":\"0\",\"1588\":\"0\",\"1587\":\"高校宽带电视20元100M融合套餐/20250901\",\"368\":\"\",\"1223\":\"\",\"1586\":\"\",\"1343\":\"1\",\"1585\":\"\",\"369\":\"\",\"1464\":\"\",\"1463\":\"\",\"800\":\"0\",\"802\":\"0\",\"804\":\"0\",\"807\":\"3\",\"809\":\"0\",\"10071\":\"\",\"10073\":\"0\",\"27\":\"0\",\"10075\":\"0\",\"10074\":\"0\",\"1484\":\"0\",\"370\":\"\",\"491\":\"商铺潜客\",\"371\":\"0\",\"494\":\"\",\"132\":\"168000\",\"1599\":\"0\",\"1598\":\"0\",\"1597\":\"0\",\"930\":\"0\",\"1596\":\"0\",\"138\":\"0\",\"1595\":\"0\",\"139\":\"0\",\"1918\":\"0\",\"1917\":\"0\",\"1916\":\"0\",\"1914\":\"0\",\"817\":\"1\",\"819\":\"1\",\"10084\":\"0\",\"37\":\"1\",\"10086\":\"0\",\"39\":\"\",\"10085\":\"0\",\"1369\":\"0\",\"10648\":\"0\",\"267\":\"1\",\"268\":\"0\",\"10521\":\"0\",\"948\":\"0\",\"949\":\"0\",\"10171\":\"0\",\"1020\":\"0\",\"271\":\"0\",\"1380\":\"0\",\"273\":\"\",\"394\":\"0\",\"395\":\"0\",\"1018\":\"0\",\"10857\":\"1\",\"1017\":\"0\",\"1016\":\"0\",\"10979\":\"\",\"1496\":\"福建四海运达国际物流有限公司\",\"833\":\"1\",\"10297\":\"1\",\"834\":\"0\",\"955\":\"0\",\"1815\":\">=168\",\"958\":\"0\",\"10179\":\"0\",\"52\":\"0\",\"1033\":\"0\",\"282\":\"0\",\"1820\":\"京东|哔哩哔哩动画|微信\",\"1940\":\"0\",\"1148\":\"94.66\",\"961\":\"0\",\"1146\":\"2021青春卡5G入网特惠（甲卡）/20260901\",\"1709\":\"0\",\"845\":\"0\",\"725\":\"0\",\"1707\":\"0\",\"10981\":\"\",\"10980\":\"\",\"606\":\"0\",\"10862\":\"\",\"10863\":\"\",\"67\":\"\",\"10152\":\"1\",\"1281\":\"168.00\",\"174\":\"1\",\"1280\":\"168.00\",\"1712\":\"1\",\"1711\":\"58981.57\",\"1831\":\"0\",\"1830\":\"0\",\"179\":\"1\",\"850\":\"0\",\"972\":\"1\",\"854\":\"0\",\"1034\":\"0\",\"855\":\"0\",\"977\":\"0\",\"1719\":\"\",\"736\":\"0\",\"1718\":\"\",\"858\":\"0\",\"618\":\"\",\"77\":\"1\",\"78\":\"0.00\",\"1055\":\"0\",\"1176\":\"30075021\",\"1054\":\"\",\"1295\":\"移动-空\",\"1172\":\"2021-09-06 08:42:44.0\",\"1290\":\"0\",\"1602\":\"\",\"1601\":\"0\",\"1600\":\"0\",\"1048\":\"\",\"741\":\"0\",\"746\":\"0\",\"867\":\"0\",\"504\":\"80.00\",\"82\":\"0\",\"10287\":\"0\",\"627\":\"安卓\",\"749\":\"0\",\"507\":\"1\",\"508\":\"2\",\"1725\":\"151\",\"1604\":\"508.3300\",\"509\":\"4\",\"1603\":\"62.5900\",\"1184\":\"20\",\"1183\":\"20\",\"195\":\"0\",\"199\":\"0\",\"1733\":\"1\",\"870\":\"\",\"510\":\"步步高\",\"511\":\"1\",\"753\":\"0\",\"512\":\"1\",\"633\":\"\",\"876\":\"\",\"1177\":\"168000\",\"513\":\"1\",\"1056\":\"0\",\"10255\":\"0\",\"10377\":\"0\",\"1857\":\"0\",\"10261\":\"1\",\"1198\":\"福州闽侯高新区网格\",\"1077\":\"\",\"2041\":\"0\",\"1192\":\"467\",\"1191\":\"000102620000000000015350\",\"1502\":\"C类\",\"881\":\"0\",\"641\":\"\",\"523\":\"\",\"2036\":\"87.58\",\"766\":\"0\",\"887\":\"0\",\"2035\":\"100.00\",\"10827\":\"1110415\",\"1505\":\"\",\"1504\":\"\",\"1080\":\"54.65\",\"1083\":\"\",\"1082\":\"58.0633\",\"1081\":\"87.58\",\"1756\":\"2326\",\"654\":\"\",\"1872\":\"0\",\"1992\":\"120\",\"1750\":\"0\",\"10110\":\"0\",\"415\":\"\",\"778\":\"1\",\"10352\":\"0.00\",\"10351\":\"0.12\",\"10475\":\"15\",\"10111\":\"0\",\"10477\":\"168\",\"10476\":\"0\",\"1516\":\"4\",\"1758\":\"0\",\"1515\":\"0\",\"10478\":\"183\",\"1099\":\"467\",\"2066\":\"0\",\"1890\":\"1\",\"2064\":\"0\",\"2062\":\"0\",\"2061\":\"0\",\"1888\":\"1\",\"421\":\"0\",\"1882\":\"1\",\"548\":\"无电视\",\"549\":\"/校园宽带/\",\"1409\":\"58063\",\"10489\":\"\",\"2070\":\"0\",\"790\":\"1\",\"1656\":\"1\",\"794\":\"\",\"310\":\"4\",\"552\":\"100\",\"795\":\"0\",\"1411\":\"0.0\",\"434\":\"\",\"1894\":\"1\",\"799\":\"0\",\"1419\":\"59078.33\",\"10696\":\"\",\"2086\":\"1\",\"2084\":\"1010202\",\"10107\":\"\",\"561\":\"1\",\"10106\":\"0\",\"10109\":\"\",\"200\":\"0\",\"1303\":\"0\",\"10108\":\"\",\"202\":\"0\",\"323\":\"\",\"1542\":\"0\",\"1421\":\"520.00\",\"325\":\"0\",\"688\":\"0\",\"446\":\"\",\"447\":\"0\",\"449\":\"0\",\"690\":\"0\",\"450\":\"0\",\"573\":\"0\",\"1314\":\"\",\"453\":\"动感地带青春卡168套餐（2019升级版）\",\"574\":\"\",\"575\":\"101\",\"214\":\"0\",\"1311\":\"5G手机\",\"578\":\"591\",\"215\":\"1\",\"219\":\"0\",\"1317\":\"V2301A\",\"10569\":\"\",\"1448\":\"0.00\",\"220\":\"0\",\"221\":\"0\",\"1447\":\"1\",\"1446\":\"0\",\"1203\":\"0\",\"1445\":\"40\",\"1202\":\"0\",\"1444\":\"0.00\",\"467\":\"福州闽侯-闽侯福大16号楼P3室分B-ZRWS\",\"1321\":\"\",\"589\":\"动感地带青春卡168套餐（2019升级版）\",\"105\":\"\",\"108\":\"0\",\"10565\":\"\",\"10564\":\"59.08\",\"1208\":\"0\",\"10688\":\"0\",\"1207\":\"\",\"10566\":\"68.6100\",\"10445\":\"\"}");
            }
            System.out.println(String.format("cost=%s nano", tempTc.stopAndGet()));
        }
        System.out.println(String.format("all_cost=%s nano", all.stopAndGet()));
    }
}
